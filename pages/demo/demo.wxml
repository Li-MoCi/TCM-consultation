<view class="container">
  <view class="header">
    <text class="title">Kimi AI 助手</text>
  </view>
  
  <view class="chat-container">
    <scroll-view class="message-list" scroll-y scroll-with-animation scroll-top="{{scrollTop}}">
      <block wx:for="{{messages}}" wx:key="index">
        <view class="message-item {{item.role}}">
          <view class="avatar {{item.role}}">
            {{item.role === 'user' ? '我' : 'AI'}}
          </view>
          <view class="message-content">
            <text class="message-text">{{item.content}}</text>
          </view>
        </view>
      </block>
      <view wx:if="{{isLoading}}" class="message-item assistant">
        <view class="avatar assistant">AI</view>
        <view class="message-content">
          <text class="message-text loading">思考中...</text>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <view class="input-area">
    <view class="input-container">
      <textarea 
        class="input-text" 
        value="{{inputText}}" 
        bindinput="onInputChange" 
        placeholder="请输入您的问题..."
        maxlength="1000"
        auto-height
      />
      <button 
        class="send-btn {{!inputText.trim() ? 'disabled' : ''}}" 
        bindtap="sendMessage"
        disabled="{{!inputText.trim() || isLoading}}"
      >
        {{isLoading ? '发送中' : '发送'}}
      </button>
    </view>
  </view>
</view>